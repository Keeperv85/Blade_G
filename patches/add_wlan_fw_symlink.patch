From d96e0fc23287bfdcaa3e6683b6fd85712399146b Mon Sep 17 00:00:00 2001
From: Keeperv85 <v8506reborn@hotmail.com>
Date: Sat, 18 Jan 2014 17:05:44 +0100
Subject: [PATCH] Update releasetools

Change-Id: Ifa6113912336fd23bfe421088771dfabcfef1de2
---
 tools/releasetools/edify_generator.py    |    5 +++++
 tools/releasetools/ota_from_target_files |    1 +
 2 files changed, 6 insertions(+)

diff --git a/tools/releasetools/edify_generator.py b/tools/releasetools/edify_generator.py
index c8de69a..611bce6 100644
--- a/tools/releasetools/edify_generator.py
+++ b/tools/releasetools/edify_generator.py
@@ -111,6 +111,11 @@ class EdifyGenerator(object):
         self.script.append('delete("/system/bin/backuptool.sh");')
         self.script.append('delete("/system/bin/backuptool.functions");')
 
+  def Add_Wlan_Symlinks(self, customstrings):
+    self.script.append('symlink("/persist/bdata.bin", "/system/etc/firmware/ath6k/AR6003/hw2.1.1/bdata.bin");')
+    self.script.append('symlink("/persist/msm7627a_qcom_wlan_nv.bin", "/system/etc/firmware/wlan/volans/WCN1314_qcom_wlan_nv.bin");')
+    self.script.append('symlink("/system/lib/modules/volans/WCN1314_rf.ko", "/system/lib/modules/wlan.ko");')
+
   def ShowProgress(self, frac, dur):
     """Update the progress bar, advancing it over 'frac' over the next
     'dur' seconds.  'dur' may be zero to advance it via SetProgress
diff --git a/tools/releasetools/ota_from_target_files b/tools/releasetools/ota_from_target_files
index 93d1c23..bb3757e 100755
--- a/tools/releasetools/ota_from_target_files
+++ b/tools/releasetools/ota_from_target_files
@@ -422,6 +422,7 @@ def WriteFullOTAPackage(input_zip, output_zip):
   script.Mount("/system")
   #script.UnpackPackageDir("recovery", "/system")
   script.UnpackPackageDir("system", "/system")
+  script.Add_Wlan_Symlinks("customstrings")
 
   symlinks = CopySystemFiles(input_zip, output_zip)
   script.MakeSymlinks(symlinks)
-- 
1.7.9.5

